---
 - name: Get Facts
   hosts: Chris-EX4200-test
   connection: local
   gather_facts: no

   vars_prompt:
    - name: DEVICE_PASSWORD
      prompt: Device password
      private: yes

   tasks:

   - name: Retrieve information from devices running Junos
     junos_facts:
      host="{{ inventory_hostname }}"
      username=pytraining
      password="{{ DEVICE_PASSWORD }}"
      config=yes
      config_format=xml
     register: junos

   - name: Print some facts
     debug: msg="device {{junos.ansible_facts.hostname}} runs version {{junos.ansible_facts.version}}"
     when: ("{{ junos.ansible_facts.version }}" != "12.3R11.2")
     
   - name: Print config
     debug: 
      msg="device {{junos.ansible_facts.config}}"
     
   - name: Print some facts
     debug: 
      msg="device {{junos.ansible_facts.config_json.configuration.vlans}}"
 
   - name: Print vlan
     debug: 
      msg="{{item}}"
     with_items: "{{junos.ansible_facts.config_json.configuration.vlans.vlan}}"











 
